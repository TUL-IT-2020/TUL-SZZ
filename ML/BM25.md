#MVD 
# Okapi BM25
Ãšprava [[TF-IDF]] pomocÃ­ TF transformace (TF(w, d)). ProblÃ©m TF-IDF je Å¾e jedno ÄastÃ© slovo z dotazu mÅ¯Å¾e dominovat nad ostatnÃ­mi. NapÅ™. Äasto v nÄ›jakÃ©m nerelevantnÃ­m dokumentu, ale mÃ©nÄ› Äasto v celÃ© kolekci. 

Parametr ğ‘˜ â‰¥ 0:
- $k$ = 0: binÃ¡rnÃ­ TF
- PÅ™Ã­liÅ¡ velkÃ© k: $y=x$ (TF)

VÃ½slednÃ¡ rovnice pÅ™i pouÅ¾itÃ­ TF transformace a poÄÃ­tÃ¡nÃ­ relevance pomocÃ­ skalÃ¡rnÃ­ho souÄinu: 
$$
sim(q, d) = \sum^N_{i=1} x_i y_i = \sum_{w âˆˆ q âˆ© d} c(w, q) \frac{(k+1)c(w,d)}{c(w, d)+k} \log\left(\frac{M + 1} {df(w)} \right) 
$$
$w$ = word (slovo)
$q$ = query (dotaz)
$d$ = document
$M$ = celkovÃ½ poÄet dokumentÅ¯ v kolekci 
$df(w)$ = celkovÃ½ poÄet dokumentÅ¯ obsahujÃ­cÃ­ slovo w (document frequency)

KromÄ› TF transformace se pouÅ¾Ã­vÃ¡ normalizace dÃ©lky dokumentu. DlouhÃ½ dokument bude mÃ­t vÄ›tÅ¡Ã­ Å¡anci vyhledÃ¡nÃ­ uÅ¾ivatelskÃ½mi dotazy.

Penalizace s pomocÃ­ parametru $ğ‘ âˆˆ [0 , 1]$ :
$norm = 1 - b + b\frac{d}{avdl}$ 
$|d|$ = dÃ©lka dokumentu 
$avdl$ = prÅ¯mÄ›rnÃ¡ dÃ©lka dokumentu

VÃ½slednÃ¡ rovnice BM25 pÅ™i poÄÃ­tÃ¡nÃ­ relevance pomocÃ­ skalÃ¡rnÃ­ho souÄinu:
$$
sim(q, d) = \sum^N_{i=1} x_i y_i = \sum_{w âˆˆ q âˆ© d} c(w, q) \frac{(k+1)c(w,d)}{c(w, d)+k\left(1 - b + b\frac{d}{avdl}\right)} \log\left(\frac{M + 1} {df(w)} \right) 
$$
V praxi se pouÅ¾Ã­vÃ¡ rozÅ¡Ã­Å™enÃ½ BM25:
- BM25F pro strukturovanÃ© dokumenty (F = fields)
- BM25+ zabraÅˆuje pÅ™Ã­liÅ¡ velkÃ© penalizaci dlouhÃ½ch dokumentÅ¯

BM25 pouÅ¾Ã­vÃ¡ defaultnÄ› [[Elasticsearch|Elasticsearch]]